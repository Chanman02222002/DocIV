{% extends "base.html" %}
{% block content %}

<h2 class="mb-4">Call Details</h2>

<div class="card shadow-sm">
    <div class="card-body">

        <h4>Doctor: {{ call.doctor.user.full_name }}</h4>
        <p><strong>Date:</strong> {{ call.datetime.strftime('%Y-%m-%d') }}</p>
        <p><strong>Time:</strong> {{ call.datetime.strftime('%I:%M %p') }}</p>

        {% if call.reschedule_requested %}
            <div class="alert alert-info mt-3">
                <strong>Doctor requested a reschedule:</strong><br>
                New time: {{ call.reschedule_datetime.strftime('%Y-%m-%d %I:%M %p') }}<br>
                Note: {{ call.reschedule_note }}
            </div>

            <form method="POST" action="/client/handle_reschedule/{{ call.id }}" class="mt-3">
                <textarea class="form-control mb-3" name="client_note" placeholder="Optional note"></textarea>

                <button class="btn btn-success" name="action" value="accept">Accept</button>
                <button class="btn btn-danger ms-2" name="action" value="decline">Decline</button>
            </form>
        {% endif %}

        <hr>

        <a href="/client/inbox" class="btn btn-outline-secondary mt-2">Back to Inbox</a>
    </div>
</div>

{% endblock %}
